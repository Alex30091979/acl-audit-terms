# üìä –°–≤–æ–¥–∫–∞ –ø–æ —Å—Ç–∞—Ç—É—Å—É OAuth –ø—Ä–æ–µ–∫—Ç–∞

## ‚úÖ –ß—Ç–æ —É–∂–µ –ø—Ä–∞–≤–∏–ª—å–Ω–æ –Ω–∞—Å—Ç—Ä–æ–µ–Ω–æ

### –í –∫–æ–¥–µ —Ä–∞—Å—à–∏—Ä–µ–Ω–∏—è:
- ‚úÖ **Secure OAuth Flow:** –ò—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è `chrome.identity.launchWebAuthFlow` (–±–µ–∑–æ–ø–∞—Å–Ω—ã–π –º–µ—Ç–æ–¥)
- ‚úÖ **Incremental Authorization:** `include_granted_scopes: 'true'` –Ω–∞—Å—Ç—Ä–æ–µ–Ω
- ‚úÖ **Token Security:** –¢–æ–∫–µ–Ω—ã –ø–µ—Ä–µ–¥–∞—é—Ç—Å—è —á–µ—Ä–µ–∑ secure redirect URI
- ‚úÖ **No WebViews:** WebViews –Ω–µ –∏—Å–ø–æ–ª—å–∑—É—é—Ç—Å—è –¥–ª—è –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏–∏ (–±–µ–∑–æ–ø–∞—Å–Ω–æ)
- ‚úÖ **Local Storage:** –¢–æ–∫–µ–Ω—ã —Ö—Ä–∞–Ω—è—Ç—Å—è –ª–æ–∫–∞–ª—å–Ω–æ –≤ chrome.storage

### –í Google Cloud Console:
- ‚úÖ **OAuth Consent Screen:** –ö–æ–Ω—Ç–∞–∫—Ç–Ω–∞—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –∞–∫—Ç—É–∞–ª—å–Ω–∞
- ‚úÖ **Project Contacts:** –í–ª–∞–¥–µ–ª—å—Ü—ã/—Ä–µ–¥–∞–∫—Ç–æ—Ä—ã –ø—Ä–∞–≤–∏–ª—å–Ω–æ –Ω–∞—Å—Ç—Ä–æ–µ–Ω—ã
- ‚úÖ **Send token securely:** –ü—Ä–∞–≤–∏–ª—å–Ω–æ –Ω–∞—Å—Ç—Ä–æ–µ–Ω–æ
- ‚úÖ **WebViews usage:** –ù–µ –∏—Å–ø–æ–ª—å–∑—É—é—Ç—Å—è (–ø—Ä–∞–≤–∏–ª—å–Ω–æ)

---

## ‚ö†Ô∏è –ü—Ä–µ–¥—É–ø—Ä–µ–∂–¥–µ–Ω–∏—è, —Ç—Ä–µ–±—É—é—â–∏–µ –¥–µ–π—Å—Ç–≤–∏–π

### 1. üî¥ –ö–†–ò–¢–ò–ß–ù–û: Billing Account Verification

**–°—Ç–∞—Ç—É—Å:** ‚ö†Ô∏è –ù–µ—Ç —Å–≤—è–∑–∞–Ω–Ω–æ–≥–æ Cloud billing account

**–í–ª–∏—è–Ω–∏–µ:** –ë–ª–æ–∫–∏—Ä—É–µ—Ç –ø—É–±–ª–∏–∫–∞—Ü–∏—é –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è

**–†–µ—à–µ–Ω–∏–µ:**
1. –û—Ç–∫—Ä–æ–π—Ç–µ: https://console.cloud.google.com/billing?project=bk-del-access2g-sheets
2. –°–æ–∑–¥–∞–π—Ç–µ –∏–ª–∏ –ø—Ä–∏–≤—è–∂–∏—Ç–µ billing account
3. –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ Google Cloud Free Tier ($300 –Ω–∞ 90 –¥–Ω–µ–π)

**–í—Ä–µ–º—è:** 10 –º–∏–Ω—É—Ç

---

### 2. üü° –†–ï–ö–û–ú–ï–ù–î–£–ï–¢–°–Ø: Cross-Account Protection

**–°—Ç–∞—Ç—É—Å:** ‚ö†Ô∏è –ü—Ä–æ–µ–∫—Ç –Ω–µ –Ω–∞—Å—Ç—Ä–æ–µ–Ω –¥–ª—è Cross-Account Protection

**–í–ª–∏—è–Ω–∏–µ:** –°–Ω–∏–∂–∞–µ—Ç —É—Ä–æ–≤–µ–Ω—å –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏ (–Ω–µ –∫—Ä–∏—Ç–∏—á–Ω–æ)

**–†–µ—à–µ–Ω–∏–µ:**
1. –û—Ç–∫—Ä–æ–π—Ç–µ: https://console.cloud.google.com/apis/credentials?project=bk-del-access2g-sheets
2. –ù–∞–π–¥–∏—Ç–µ OAuth Client ID: `276339510271-6ah52kmcp36gtmp3lpnv50gkpgclct4m`
3. –ù–∞–∂–º–∏—Ç–µ ‚úèÔ∏è (—Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞—Ç—å)
4. –í–∫–ª—é—á–∏—Ç–µ "Cross-Account Protection" (–µ—Å–ª–∏ –æ–ø—Ü–∏—è –¥–æ—Å—Ç—É–ø–Ω–∞)

**–ü—Ä–∏–º–µ—á–∞–Ω–∏–µ:** –ú–æ–∂–µ—Ç –±—ã—Ç—å –Ω–µ–¥–æ—Å—Ç—É–ø–Ω–æ –¥–ª—è Chrome Extensions

**–í—Ä–µ–º—è:** 2 –º–∏–Ω—É—Ç—ã

---

### 3. üü° –ú–û–ñ–ï–¢ –û–°–¢–ê–¢–¨–°–Ø: Use Secure Flows

**–°—Ç–∞—Ç—É—Å:** ‚ö†Ô∏è –ü—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –Ω–µ –Ω–∞—Å—Ç—Ä–æ–µ–Ω–æ –¥–ª—è –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è –±–µ–∑–æ–ø–∞—Å–Ω—ã—Ö OAuth flows

**–í–ª–∏—è–Ω–∏–µ:** –ü—Ä–µ–¥—É–ø—Ä–µ–∂–¥–µ–Ω–∏–µ (–∫–æ–¥ —É–∂–µ –ø—Ä–∞–≤–∏–ª—å–Ω—ã–π)

**–ê–Ω–∞–ª–∏–∑:**
- ‚úÖ –ö–æ–¥ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç `chrome.identity.launchWebAuthFlow` (–±–µ–∑–æ–ø–∞—Å–Ω–æ)
- ‚úÖ WebViews –Ω–µ –∏—Å–ø–æ–ª—å–∑—É—é—Ç—Å—è (–±–µ–∑–æ–ø–∞—Å–Ω–æ)
- ‚ö†Ô∏è –ü—Ä–µ–¥—É–ø—Ä–µ–∂–¥–µ–Ω–∏–µ –º–æ–∂–µ—Ç –±—ã—Ç—å –ª–æ–∂–Ω—ã–º

**–†–µ—à–µ–Ω–∏–µ:**
- –ö–æ–¥ —É–∂–µ –ø—Ä–∞–≤–∏–ª—å–Ω—ã–π, –Ω–∏—á–µ–≥–æ –º–µ–Ω—è—Ç—å –Ω–µ –Ω—É–∂–Ω–æ
- –ü—Ä–µ–¥—É–ø—Ä–µ–∂–¥–µ–Ω–∏–µ –∏—Å—á–µ–∑–Ω–µ—Ç –ø–æ—Å–ª–µ –≤–µ—Ä–∏—Ñ–∏–∫–∞—Ü–∏–∏ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è

**–í—Ä–µ–º—è:** 0 –º–∏–Ω—É—Ç (—É–∂–µ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–æ –≤ –∫–æ–¥–µ)

---

### 4. üü° –ú–û–ñ–ï–¢ –û–°–¢–ê–¢–¨–°–Ø: Incremental Authorization

**–°—Ç–∞—Ç—É—Å:** ‚ö†Ô∏è –û–¥–∏–Ω –∏–ª–∏ –Ω–µ—Å–∫–æ–ª—å–∫–æ OAuth –∫–ª–∏–µ–Ω—Ç–æ–≤ –º–æ–≥—É—Ç –Ω–µ –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞—Ç—å –∏–Ω–∫—Ä–µ–º–µ–Ω—Ç–∞–ª—å–Ω—É—é –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏—é

**–í–ª–∏—è–Ω–∏–µ:** –ü—Ä–µ–¥—É–ø—Ä–µ–∂–¥–µ–Ω–∏–µ (–∫–æ–¥ —É–∂–µ –ø—Ä–∞–≤–∏–ª—å–Ω—ã–π)

**–ê–Ω–∞–ª–∏–∑:**
- ‚úÖ –í –∫–æ–¥–µ –µ—Å—Ç—å `include_granted_scopes: 'true'` (—Å—Ç—Ä–æ–∫–∞ 382)
- ‚úÖ –≠—Ç–æ –ø—Ä–∞–≤–∏–ª—å–Ω–∞—è –Ω–∞—Å—Ç—Ä–æ–π–∫–∞ –¥–ª—è –∏–Ω–∫—Ä–µ–º–µ–Ω—Ç–∞–ª—å–Ω–æ–π –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏–∏
- ‚ö†Ô∏è –ü—Ä–µ–¥—É–ø—Ä–µ–∂–¥–µ–Ω–∏–µ –º–æ–∂–µ—Ç –±—ã—Ç—å —Å–≤—è–∑–∞–Ω–æ —Å —Ç–µ–º, —á—Ç–æ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –µ—â—ë –Ω–µ –ø—Ä–æ—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–æ

**–†–µ—à–µ–Ω–∏–µ:**
- –ö–æ–¥ —É–∂–µ –ø—Ä–∞–≤–∏–ª—å–Ω—ã–π, –Ω–∏—á–µ–≥–æ –º–µ–Ω—è—Ç—å –Ω–µ –Ω—É–∂–Ω–æ
- –ü—Ä–µ–¥—É–ø—Ä–µ–∂–¥–µ–Ω–∏–µ –∏—Å—á–µ–∑–Ω–µ—Ç –ø–æ—Å–ª–µ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è —Å —Ä–µ–∞–ª—å–Ω—ã–º–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è–º–∏

**–í—Ä–µ–º—è:** 0 –º–∏–Ω—É—Ç (—É–∂–µ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–æ –≤ –∫–æ–¥–µ)

---

## üìã –ü–ª–∞–Ω –¥–µ–π—Å—Ç–≤–∏–π

### –ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç 1 (–ö–†–ò–¢–ò–ß–ù–û):
1. ‚úÖ –ü—Ä–∏–≤—è–∑–∞—Ç—å Billing Account
   - –°—Å—ã–ª–∫–∞: https://console.cloud.google.com/billing?project=bk-del-access2g-sheets
   - –í—Ä–µ–º—è: 10 –º–∏–Ω—É—Ç

### –ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç 2 (–†–ï–ö–û–ú–ï–ù–î–£–ï–¢–°–Ø):
2. ‚úÖ –í–∫–ª—é—á–∏—Ç—å Cross-Account Protection (–µ—Å–ª–∏ –¥–æ—Å—Ç—É–ø–Ω–æ)
   - –°—Å—ã–ª–∫–∞: https://console.cloud.google.com/apis/credentials?project=bk-del-access2g-sheets
   - –í—Ä–µ–º—è: 2 –º–∏–Ω—É—Ç—ã

3. ‚úÖ –ü—Ä–æ–≤–µ—Ä–∏—Ç—å OAuth Client –Ω–∞—Å—Ç—Ä–æ–π–∫–∏
   - Type: Web application
   - Redirect URI: `https://ffdnnkjifbbiipnjbfjblijneddeilpg.chromiumapp.org/`
   - –í—Ä–µ–º—è: 2 –º–∏–Ω—É—Ç—ã

### –ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç 3 (–ü–†–û–í–ï–†–ö–ê):
4. ‚úÖ –ü—Ä–æ–≤–µ—Ä–∏—Ç—å OAuth Consent Screen
   - Terms of Service URL —É–∫–∞–∑–∞–Ω
   - Privacy Policy URL —É–∫–∞–∑–∞–Ω
   - –í—Ä–µ–º—è: 1 –º–∏–Ω—É—Ç–∞

---

## üéØ –û–∂–∏–¥–∞–µ–º—ã–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç

### –ü–æ—Å–ª–µ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è –≤—Å–µ—Ö –¥–µ–π—Å—Ç–≤–∏–π:

**–î–æ–ª–∂–Ω—ã –∏—Å—á–µ–∑–Ω—É—Ç—å:**
- ‚úÖ Billing account verification ‚Üí ‚úÖ Verified

**–ú–æ–≥—É—Ç –æ—Å—Ç–∞—Ç—å—Å—è (–Ω–æ—Ä–º–∞–ª—å–Ω–æ):**
- ‚ö†Ô∏è Cross-Account Protection (–µ—Å–ª–∏ –Ω–µ–¥–æ—Å—Ç—É–ø–Ω–æ –¥–ª—è Chrome Extensions)
- ‚ö†Ô∏è Use secure flows (–∏—Å—á–µ–∑–Ω–µ—Ç –ø–æ—Å–ª–µ –≤–µ—Ä–∏—Ñ–∏–∫–∞—Ü–∏–∏)
- ‚ö†Ô∏è Incremental authorization (–∏—Å—á–µ–∑–Ω–µ—Ç –ø–æ—Å–ª–µ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è)

**–£–∂–µ –ø—Ä–∞–≤–∏–ª—å–Ω–æ:**
- ‚úÖ Send token securely
- ‚úÖ WebViews usage
- ‚úÖ Updated contact information
- ‚úÖ Project contacts

---

## üìù –î–æ–∫—É–º–µ–Ω—Ç—ã

–ü–æ–¥—Ä–æ–±–Ω—ã–µ –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏–∏:
- **–ü–æ–ª–Ω–∞—è –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏—è:** `OAUTH_ISSUES_FIX.md`
- **–ë—ã—Å—Ç—Ä–∞—è –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏—è:** `QUICK_FIX_OAUTH_ISSUES.md`

---

## üîó –í—Å–µ —Å—Å—ã–ª–∫–∏

- **OAuth Overview:** https://console.cloud.google.com/auth/overview?project=bk-del-access2g-sheets
- **Billing:** https://console.cloud.google.com/billing?project=bk-del-access2g-sheets
- **OAuth Client:** https://console.cloud.google.com/apis/credentials?project=bk-del-access2g-sheets
- **OAuth Consent Screen:** https://console.cloud.google.com/apis/credentials/consent?project=bk-del-access2g-sheets
- **APIs:** https://console.cloud.google.com/apis/dashboard?project=bk-del-access2g-sheets

---

**–î–∞—Ç–∞ –∞–Ω–∞–ª–∏–∑–∞:** 2024-12-19  
**–°—Ç–∞—Ç—É—Å –∫–æ–¥–∞:** ‚úÖ –ü—Ä–∞–≤–∏–ª—å–Ω–æ –Ω–∞—Å—Ç—Ä–æ–µ–Ω  
**–¢—Ä–µ–±—É–µ—Ç—Å—è –¥–µ–π—Å—Ç–≤–∏–π:** –ü—Ä–∏–≤—è–∑–∞—Ç—å Billing Account

